## 커밋 관리하기

<br />

## 어떻게 커밋하는게 좋을까요?

<br />

### 작업을 커밋할 때 권장사항

- '하나의 커밋'에는 '한 단위의 작업'을 넣도록 한다.
  - '한 작업'을 '여러 버전에 걸쳐' 커밋하지 않는다.
  - '여러 작업'을 '한 버전'에 커밋하지 않는다.
    > '변화'(수정사항)에 유연할 수 있는게 포인트.
- 커밋 메시지는 어떤 작업이 이뤄졌는지 알아볼 수 있도록 작성한다.

<br />

### 커밋 메시지 컨벤션

널리 사용되는 커밋 메시지 작성방식

```
type: subject

body (optional)
...
...
...

footer (optional)
```

```
feat: 압축파일 미리보기 기능 추가

사용자의 편의를 위해 압축을 풀기 전에
다음과 같이 압축파일 미리보기를 할 수 있도록 함
- 마우스 오른쪽 클릭
- 윈도우 탐색기 또는 맥 파인더의 미리보기 창

Closes #125
```

<br />

#### Type

| 타입     | 설명                                            |
| -------- | ----------------------------------------------- |
| feat     | 새로운 기능 추가                                |
| fix      | 버그 수정                                       |
| docs     | 문서 수정                                       |
| style    | 공백, 세미콜론 등 스타일 수정                   |
| refactor | 코드 리팩토링                                   |
| perf     | 성능 개선                                       |
| test     | 테스트 추가                                     |
| chore    | 빌드 과정 또는 보조 기능(문서 생성기능 등) 수정 |

<br />

#### Subject

커밋의 작업 내용 간략히 설명

<br />

#### Body

길게 설명할 필요가 있을 시 작성

<br />

#### Footer

- Breaking Point가 있을 때
- 특정 이슈에 대한 해결 작업일 때

<br />

### Gitmoji

> [Gitmoji](https://gitmoji.dev/)

<br />

## 보다 세심하게 스테이징하고 커밋하기

hunk

<br />

## 커밋하기 애매한 변화 치워두기

<br />

### `Stash` 사용법 정리

| 명령어                      | 설명                                          | 비고                       |
| --------------------------- | --------------------------------------------- | -------------------------- |
| git stash                   | 현 작업들 치워두기                            | 끝에 save가 생략           |
| git stash apply             | 치워둔 마지막 항목(번호 없을 시) 적용         | 끝에 번호로 항목 지정 가능 |
| git stash drop              | 치워둔 마지막 항목 (번호 없을 시) 삭제)       | 끝에 번호로 항목 지정 가능 |
| git stash pop               | 치워둔 마지막 항목(번호 없을 시) 적용 및 삭제 | apply + drop               |
| git stash branch (브랜치명) | 새 브랜치를 생성하여 pop                      | apply + drop               |
| git stash clear             | 치워둔 모든 항목들 비우기                     |                            |

<br />

### 원하는 것만 `stash` 해보기

- 아래 명령어로 `Stash2`만 선택하여 stash.

```
git stash -p  # hunk 같이
```

<br />

### 메시지와 함께 stash

```
git stash -m 'Add Stash3'
```

<br />

### stash 목록 보기

```
git stash list
```

> 리스트상의 번호로 `apply`, `drop`, `pop` 가능. (ex. `git stash apply stash@{1}`)

<br />

## 커밋 수정하기 (`git commit --amend`)

> 마지막 커밋 수정

<br />

### 커밋 메시지 변경

- 아래 명령어로 에디터 열어 커밋 메시지 변경

```
git commit --amend
```

<br />

### 커밋에 변화 추가

- `git add`후 `git commit --amend`해서 마지막 커밋에 포함시키기.

### 커밋 메시지 한 줄로 변경

```
git commit --amend -m 'commit message'
```

<br />

## 과거의 커밋들을 수정, 삭제, 병합, 분할하기

### `git rebase -i`

- 과거 커밋 내역을 다양한 방법으로 수정 가능

| 명령어    | 설명               |
| --------- | ------------------ |
| p, pick   | 커밋 그대로 두기   |
| r, reword | 커밋 메시지 변경   |
| e, edit   | 수정을 위해 정지   |
| d, drop   | 커밋 삭제          |
| s, squash | 이전 커밋에 합치기 |

👍🏻
